    <!--template for new event iron-localstorage-->
<dom-module id="create-event">
  <template>
    <iron-localstorage
      name="thing"
      value="{{thing}}"
      on-iron-localstorage-load="eventLoaded"
      on-iron-localstorage-load-empty="initializeEvent"
      id="locStore">
    </iron-localstorage>

        <!-- event name -->
    <paper-input type="text" label="What do you want to call the event?" required auto-validate autocomplete="on" error-message="Name of the event, please"  id="eventName" value="{{thing.eventName::change}}" class="thingRequired"></paper-input>
    <!-- event type -->
    <paper-autocomplete type="text" label="What kind of event? Wedding..."  required error-message="Event type?" id="input-local" class="thingRequired"></paper-autocomplete>
    <!-- event host -->
    <paper-input type="text" label="Who is hosting the event?" required auto-validate autocomplete="on" error-message="host for the event?" id="hostName" value="{{thing.hostName::change}}" class="thingRequired"></paper-input>
    <!-- event start -->
    <paper-input type="datetime-local" label ="start date and time" required auto-validate error-message="When does it start?" id="start" class="thingRequired"></paper-input>
    <!-- event end -->
    <paper-input type="datetime-local" label ="end date and time" required auto-validate error-message="When does it end?" id="end" class="thingRequired"></paper-input>
    <!-- event guests -->
    <paper-input type="text" label="Who do you want to invite?" required auto-validate autocomplete="on" error-message="Guests?" id="guestList" value="{{thing.guests::change}}" class="thingRequired"></paper-input>
    <!-- event adress -->
    <paper-input type="text" id="address" label="Address" onFocus="geolocate()" required auto-validate autocomplete="on" error-message="Where is it?" id="place" value="{{thing.address::change}}" class="thingRequired"></paper-input>
    <!-- event mesasge -->
    <paper-input type="text" label="Additional information to the guests?" id="addInfo"></paper-input>

    <paper-button raised on-click="createEventBtn" id="createEventBtn">create event</paper-button>
    <br>
    <br>
    <p id="eventValue"></p>

  </template>
</dom-module>

<script type="text/javascript">

      // a polymer script for localstorage
  Polymer({
    is: 'create-event',
    properties: {
      thing: {
        type: Object,
        notify: true
      }
    },
    // initializes default if nothing has been stored
    initializeEvent: function() {
      var fullName = document.getElementById('firstName').value + " " + document.getElementById('lastName').value;
        this.thing = {
          eventName: "",
          eventType: "",
          hostName: fullName,
          startTime: "",
          endTime: "",
          guests: "",
          address: "",
          addInfo: ""
        }
    },
    // when the event is loaded
   eventLoaded: function() {
      console.log('thing loaded; value: '+ this.thing.hostName);
      var fullName = document.getElementById('firstName').value + " " + document.getElementById('lastName').value;
      this.thing = {hostName: fullName}
  },

  // when the create event button is clicked all the required fields should be filled in and
  //the user input is saved in an array
  createEventBtn: function() {
    var ev1 = document.getElementById("event");
    var ev2 = document.getElementById("eventTime");
    var ev3 = document.getElementById("eventLocation");
    var ev4 = document.getElementById("eventAddInfo");
    var evName = document.getElementById("evName");
    var guests = document.getElementById('guestList');
    var eventName = document.getElementById('eventName');
    var eventType = document.getElementById('input-local');
    var eventHost = document.getElementById('hostName');
    var eventStart = document.getElementById('start');
    var eventEnd = document.getElementById('end');
    var eventAdress = document.getElementById('address');
    var eventInfo = document.getElementById('addInfo');

    var valid = validateForm(); //checks that all required fields are filled in

    if (valid) {
        this.$.eventValue.innerHTML = this.$.locStore.value.eventName + " has been created";

        createEventArray.push({eventName: eventName.value, hostName: eventHost.value, eventType: eventType.value,
        guests: guests.value, start: eventStart.value, end: eventEnd.value, eventAdress: eventAdress.value, eventInfo: eventInfo.value});


        evName.textContent = eventName.value;
        ev1.textContent = eventHost.value + " invited " + guests.value + " to " + eventType.value + "." ;
        ev2.textContent = "Starting: " + eventStart.value + " and ending: " + eventEnd.value + "." ;
        ev3.textContent = " Address: " + eventAdress.value + ".";
        ev4.textContent = eventInfo.value;
      } else {
        this.$.eventValue.innerHTML = "Please check that you filled in all required fields";

      }
  }

  });

    // an event array to save the different events
  var createEventArray = [];

  function validateForm() {
    var isValid = true;
    $('.thingRequired').each(function() {
      if ( $(this).val() === '' )
          isValid = false;
    });
    return isValid;
  };

  // localstorage can only handle strings with thess two new prototypes we can use it for objects and arrays as well
  // Use localStorage.setObj(key, value) to save an array or object and localStorage.getObj(key) to retrieve it.
  Storage.prototype.setObj = function(key, obj) { //
    return this.setItem(key, JSON.stringify(obj))
  }

  Storage.prototype.getObj = function(key) {
      return JSON.parse(this.getItem(key))
  }

</script>